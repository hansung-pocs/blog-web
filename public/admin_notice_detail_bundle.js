(()=>{"use strict";function e(e){return`https://hansungpocs.site/${e}`}const t=window.location.href.split("?postId=")[1],o=document.querySelector(".notice-detail"),n=document.querySelector(".notice-title-first"),i=document.querySelector(".notice-title-second"),s=document.querySelector(".notice-detail-content"),a=document.querySelector("#title"),c=document.querySelector("#content"),d=document.querySelector("#admin-notice-buttons"),r=document.querySelector("#flexCheckDefault"),l=e(`api/posts/${t}`);let u=localStorage.getItem("sessionToken");const h=localStorage.getItem("userId");let m,y,p,w,g=new Headers({"x-pocs-session-token":u});function f(){window.location.href="./admin.html"}window.noticeEditPage=function(){document.querySelector(".notice-edit").classList.remove("hidden"),o.classList.add("hidden"),a.value=y,c.value=p},window.noticeEdit=async function(){"추억"===w?w="memory":"추천"===w?w="reference":"스터디"===w?w="study":"노하우"===w&&(w="knowhow");const o={title:a.value,content:c.value,userId:m,onlyMember:r.checked,category:w},n={method:"PATCH",headers:{"Content-Type":"application/json","x-pocs-session-token":u},body:JSON.stringify(o)},i=await fetch(e(`api/posts/${t}`),n),s=await i.json();302===s.status?f():console.log(s.message)},window.DeleteNotice=async function(){const o={userId:h},n={method:"PATCH",headers:{"Content-Type":"application/json","x-pocs-session-token":u},body:JSON.stringify(o)},i=await fetch(e(`api/posts/${t}/delete`),n),s=await i.json();console.log(s.status),201===s.status?f():console.log(s.message)},fetch(l,{headers:g}).then((e=>e.json())).then((e=>{console.log(e),404===e.status?(n.innerHTML="삭제된 게시글입니다.",d.classList.add("hidden")):(n.innerHTML=`<h3>${e.data.title}</h3>`,i.innerHTML=`<div>${e.data.category}  |</div>\n            <div> ${e.data.createdAt}  | </div>\n            <div> ${e.data.updatedAt||""}  | </div>\n            <div> ${e.data.writer.name||"익명"} </div>\n            `,s.innerHTML=`<div>${e.data.content}</div>`,y=e.data.title,p=e.data.content,w=e.data.category,m=e.data.writer.userId)}))})();