(()=>{const t=window.location.href.split("?postId=")[1],e=document.querySelector(".posts-buttons");let n,o=localStorage.getItem("sessionToken"),s=new Headers({"x-pocs-session-token":o});window.DeletePost=async function(){const e={userId:n},o={method:"PATCH",headers:{"Content-Type":"application/json","x-pocs-session-token":sessionToken},body:JSON.stringify(e)},s=await fetch(`http://34.64.170.244:80/api/posts/${t}/delete`,o),a=await s.json();console.log(a.status),201===a.status?window.location.href="../html/posts.html":console.log(a.message)},window.GotoPostEditPage=function(){window.location.href=`../html/posts_detail_edit.html?postId=${t}`},async function(){const o=document.querySelector(".notice-title-first"),a=document.querySelector(".notice-title-second"),i=document.querySelector(".notice-detail-content"),d=`http://34.64.170.244:80/api/posts/${t}`;await fetch(d,{headers:s}).then((t=>t.json())).then((t=>{console.log(t),403===t.status||404===t.status?(o.innerHTML="삭제되었거나 없는 게시글입니다.",a.innerHTML="",e.classList.add("hidden")):(o.innerHTML=`<h3>[<span id="title_category">${t.data.category}</span>]${t.data.title}</h3>`,a.innerHTML=`\n                <div class="me-2">${t.data.onlyMember?"회원 전용 | ":""}</div>\n            <div class="me-2">${t.data.updatedAt||t.data.createdAt}</div>\n            <div class="me-2"> ${t.data.writer.name||"익명"} </div>\n            <div>조회수 ${t.data.views}</div>\n            `,i.innerHTML=`<div style="min-height: 200px">${marked.parse(t.data.content)}</div>`,n=t.data.writer.userId,present_page_title=t.data.title,present_page_content=t.data.content,category=t.data.category)})),await function(){let t=parseInt(localStorage.getItem("userId")),o=localStorage.getItem("userType");"member"===o?t!==n&&e.classList.add("hidden"):"anonymous"===o&&e.classList.add("hidden")}()}()})();