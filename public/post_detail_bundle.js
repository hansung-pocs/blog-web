(()=>{"use strict";function t(t){return`http://www.hansungpocs.site:80/${t}`}const e=window.location.href.split("?postId=")[1],s=document.querySelector(".posts-buttons");let n,o=localStorage.getItem("sessionToken"),a=new Headers({"x-pocs-session-token":o});window.DeletePost=async function(){const s={userId:n},a={method:"PATCH",headers:{"Content-Type":"application/json","x-pocs-session-token":o},body:JSON.stringify(s)},i=await fetch(t(`api/posts/${e}/delete`),a),d=await i.json();console.log(d.status),200===d.status?window.location.href="./posts.html":console.log(d.message)},window.GotoPostEditPage=function(){window.location.href=`./posts_detail_edit.html?postId=${e}`},async function(){const o=document.querySelector(".notice-title-first"),i=document.querySelector(".notice-title-second"),d=document.querySelector(".notice-detail-content");await fetch(t(`api/posts/${e}`),{headers:a}).then((t=>t.json())).then((t=>{console.log(t),403===t.status||404===t.status?(o.innerHTML="삭제되었거나 없는 게시글입니다.",i.innerHTML="",s.classList.add("hidden")):(o.innerHTML=`<h3>[<span id="title_category">${t.data.category}</span>]${t.data.title}</h3>`,i.innerHTML=`\n                <div class="me-2">${t.data.onlyMember?"회원 전용 | ":""}</div>\n            <div class="me-2">${t.data.updatedAt||t.data.createdAt}</div>\n            <div class="me-2"> ${t.data.writer.name||"익명"} </div>\n            <div>조회수 ${t.data.views}</div>\n            `,d.innerHTML=`<div style="min-height: 200px">${marked.parse(t.data.content)}</div>`,n=t.data.writer.userId)})),function(){let t=parseInt(localStorage.getItem("userId")),e=localStorage.getItem("userType");"member"===e?t!==n&&s.classList.add("hidden"):"anonymous"===e&&s.classList.add("hidden")}()}()})();