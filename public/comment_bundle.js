(()=>{const n=window.location.href,t=(window.location.href,n.split("?postId="),n.split("?postId=")[1]);let e=localStorage.getItem("sessionToken"),o=new Headers({"x-pocs-session-token":e});const i=localStorage.getItem("userType"),l=localStorage.getItem("userId"),d=`http://34.64.161.55:80/api/comments/${t}`;function a(n,t){const e=document.querySelector(`#editDelBtn${t}`);"admin"!==i&&l!==n||e.classList.replace("hidden","non-hidden")}window.setTimeout((()=>{!async function(n){const t=document.querySelector("#comments_count"),e=document.querySelector("#comments_div"),i=document.querySelector("#comment_input");await fetch(n,{headers:o}).then((n=>n.json())).then((n=>{if(console.log(n),t.innerHTML=`(${n.data.comments.length})`,e.innerHTML="",i.value="",0!=n.data.comments.length)for(let t=0;t<n.data.comments.length;t++)if(null!==n.data.comments[t].canceledAt){const o=n.data.comments[t].commentId;e.innerHTML+=`\n                            <div id="comment${o}" class="row p-2" >\n                                <div style="font-size: small"></div>\n                                <div class="non-hidden content d-flex justify-content-between my-2">\n                                    <div style="color:lightgray">작성자가 삭제한 댓글입니다.</div>\n                                </div>\n                                <div class="d-flex">\n                                    <div onclick="commentBtnClick(${o})">\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-dots-fill" viewBox="0 0 16 16">\n                                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n                                        </svg>\n                                        <span class="reply_count">${n.data.comments[t].childrenCount||0}</span>\n                                    </div>\n                                </div>\n                                <hr>\n                                <div class="hidden reply">\n                                </div>\n                            </div>\n                    `}else if(n.data.comments[t].commentId===n.data.comments[t].parentId){const o=n.data.comments[t].commentId,i=n.data.comments[t].writer.userId;e.innerHTML+=`\n                            <div id="comment${o}" class="row p-2">\n                                <div style="font-size: small">${n.data.comments[t].writer.name||"익명"}</div>\n                                <div class="non-hidden content d-flex justify-content-between my-2">\n                                    <div>${n.data.comments[t].content}</div>\n                                    <div class="mx-5">\n                                        <button id="editDelBtn${o}" type="button" class="hidden btn btn-light" data-bs-toggle="dropdown" aria-expanded="false">\n                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">\n                                                <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n                                            </svg>\n                                        </button>\n                                        <ul class="dropdown-menu">\n                                            <li><a class="dropdown-item" onclick="clickEditCommentBtn(${i}, ${o})">수정</a></li>\n                                            <li><a class="dropdown-item" onclick="DeleteComment(${i}, ${o})">삭제</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class="hidden contentEdit row mb-3 my-2">\n                                    <div class="col">\n                                        <input class="editInput form-control me-2" type="text" value="${n.data.comments[t].content}" aria-label="Comment" />\n                                    </div>\n                                    <div class="col-1">\n                                        <button type="button" class="btn btn-primary w-100" onclick="EditComment(${o})">수정</button>\n                                    </div>\n                                </div>\n                                <div class="d-flex">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock me-2"  viewBox="0 0 16 16">\n                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>\n                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>\n                                    </svg>\n                                    <div class="me-3" style="font-size: smaller">${n.data.comments[t].updatedAt||n.data.comments[t].createdAt}</div>\n                                    <div onclick="commentBtnClick(${o})">\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-dots-fill" viewBox="0 0 16 16">\n                                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm5 4a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n                                        </svg>\n                                        <span class="reply_count">${n.data.comments[t].childrenCount||0}</span>\n                                    </div>\n                                </div>\n                                <hr>\n                                <div class="hidden reply">\n                                    <div class="row mb-3 mx-1">\n                                        <div class="col">\n                                            <input class="form-control me-2 reply_input" type="text" placeholder="답글" aria-label="Comment" />\n                                        </div>\n                                        <div class="col-1">\n                                            <button type="button" class="reply_input_btn btn btn-primary w-100" onclick="AddComment(${o},'reply')">등록</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                    `,a(i,o)}else{const e=n.data.comments[t].commentId,o=n.data.comments[t].parentId,i=n.data.comments[t].writer.userId,l=document.querySelector(`#comment${o} .reply`);if(null==l)continue;l.innerHTML+=`\n                            <div id="reply${e}" class="row px-3">\n                                <div style="font-size: small">${n.data.comments[t].writer.name||"익명"}</div>\n                                <div class="non-hidden content d-flex justify-content-between my-2">\n                                    <div>${n.data.comments[t].content}</div>\n                                    <div class="mx-5">\n                                        <button id="editDelBtn${e}" type="button" class="hidden btn btn-light" data-bs-toggle="dropdown" aria-expanded="false">\n                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">\n                                                <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n                                            </svg>\n                                        </button>\n                                        <ul class="dropdown-menu">\n                                            <li><a class="dropdown-item" onclick="clickEditCommentBtn(${i},${e},'reply')">수정</a></li>\n                                            <li><a class="dropdown-item" onclick="DeleteComment(${i}, ${e},'reply')">삭제</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class="hidden contentEdit row mb-3 my-2">\n                                    <div class="col">\n                                        <input class="editInput form-control me-2" type="text" value="${n.data.comments[t].content}" aria-label="Comment" />\n                                    </div>\n                                    <div class="col-1">\n                                        <button type="button" class="btn btn-primary w-100" onclick="EditComment(${e},'reply')">수정</button>\n                                    </div>\n                                </div>\n                                <div class="d-flex">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock me-2"  viewBox="0 0 16 16">\n                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>\n                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>\n                                    </svg>\n                                    <div class="me-3" style="font-size: smaller">${n.data.comments[t].updatedAt||n.data.comments[t].createdAt}</div>\n                                </div>\n                                <hr>\n                            </div>\n                        `,a(i,e)}})),function(n="comment"){const t=localStorage.getItem("userType"),e=document.querySelector("#comment_input"),o=document.querySelector("#comment_input_btn"),i=document.querySelector(".reply_input"),d=document.querySelector(".reply_input_btn"),a=document.querySelector("#title_category"),s=qaWriterId;"Q/A"==a.innerHTML&&l==s||"anonymous"===t&&(e.placeholder="회원만 작성할 수 있습니다.",o.classList.add("hidden"),null!=i&&(i.placeholder="회원만 작성할 수 있습니다.",d.classList.add("hidden")))}()}(d)}),200)})();