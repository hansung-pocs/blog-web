(()=>{"use strict";function t(t){return`http://www.hansungpocs.site:80/${t}`}const e=document.querySelector("#qa table thead"),n=document.querySelector("#qa table tbody");let a=localStorage.getItem("sessionToken"),o=new Headers({"x-pocs-session-token":a}),s=1,i=0;async function l(t){await fetch(t,{headers:o}).then((t=>t.json())).then((t=>{if(console.log(t),e.innerHTML='<tr class="post-list">\n      <th>번호</th>\n      <th>제목</th>\n      <th>작성자</th>\n      <th>작성일</th>\n      <th>카테고리</th>\n  </tr>',n.innerHTML="",null===t.data)n.innerHTML="<tr><td>0</td><td>글을 작성하세요.</td><td></td></tr>";else for(let e=0;e<t.data.posts.length;e++)n.innerHTML+=`\n      <tr class="post-list">\n      <td>${t.data.posts[e].postId}</td>\n      <td onclick="goQaDetailPage(${t.data.posts[e].postId})"\n          >${t.data.posts[e].title}</td>\n      <td>익명</td>\n      <td>${t.data.posts[e].createdAt}</td>\n      <td>${t.data.posts[e].category}</td>\n      </tr>\n      `})),c()}function c(){let t='<ul class="pagination justify-content-center">\n              <li class="page-item">\n                  <a class="page-link" href="#" tabindex="-1" aria-disabled="true" onclick="movePreviousPage()">Previous</a>\n              </li>',e=5*Math.ceil(s/5);e>i&&(e=i);for(let n=e-4<=0?1:e-4;n<=e;n++)t+=`<li class="page-item ${s==n?"active":""}"><a class="page-link" onclick="movePage(${n})">${n}</a></li>`;t+='<li class="page-item">\n                  <a class="page-link" href="#" onclick="moveNextPage()">Next</a>\n              </li>',document.querySelector("#post-pagination-bar").innerHTML=t}function d(){l(t(`api/posts?id=qna&offset=15&pageNum=${s}`)),c()}window.moveQaAddPage=function(){const t=localStorage.getItem("userType");console.log(t),window.location.href="./qa_add.html"},window.movePage=function(t){s!==t&&(s=t,d())},window.moveNextPage=function(){s>=i||(s++,d())},window.movePreviousPage=function(){s<=1||(s--,d())},window.goQaDetailPage=function(t){window.location.href=`qa_detail.html?postId=${t}`},fetch(t(`api/posts?id=qna&offset=15&pageNum=${s}`),{headers:o}).then((t=>t.json())).then((t=>{t.data.categories.map((t=>{i+=t.count,console.log(i)})),i=Math.ceil(i/15),console.log(i)})),l(t(`api/posts?id=qna&offset=15&pageNum=${s}`))})();