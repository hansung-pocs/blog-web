(()=>{let t,e=localStorage.getItem("sessionToken"),a=new Headers({"x-pocs-session-token":e});document.querySelector("#notice table");const n=document.querySelector("#notice table thead"),s=document.querySelector("#notice table tbody"),i=(document.querySelector("#user table"),document.querySelector("#user table thead")),o=document.querySelector("#user table tbody");let d,l,r=1,c=1,u=`http://34.64.170.244:80/api/admin/posts?offset=15&pageNum=${r}`,m=`http://34.64.170.244:80/api/admin/users?offset=15&pageNum=${c}`;async function h(){await fetch(u,{headers:a}).then((t=>t.json())).then((e=>{if(console.log(e),t=e.data.posts,n.innerHTML='\n                <tr class="post-list">\n                <th>번호</th>\n                <th>제목</th>\n                <th>작성자</th>\n                <th>작성일</th>\n                <th>카테고리</th>\n            </tr>',s.innerHTML="",null===e.data)s.innerHTML="<tr><td>0</td><td>글을 작성하세요.</td><td></td></tr>";else{d=Math.ceil((e.data.categories[0].count+e.data.categories[1].count+e.data.categories[2].count+e.data.categories[3].count+e.data.categories[4].count+e.data.categories[5].count)/15);for(let a=0;a<e.data.posts.length;a++)s.innerHTML+=`\n                <tr class="post-list">\n                <td>${e.data.posts[a].postId}</td>\n                <td onclick="moveNoticeDetailPage(${t[a].postId})"\n                    >${t[a].title}</td>\n                <td>${t[a].writerName||"익명"}</td>\n                <td>${t[a].createdAt}</td>\n                <td>${t[a].category}</td>\n                </tr>\n                `}})),await p()}async function g(){await fetch(m,{headers:a}).then((t=>t.json())).then((t=>{if(console.log(t),i.innerHTML='\n                <tr class="user-list">\n                <th>번호</th>\n                <th>성명</th>\n                <th>학번</th>\n                <th>e-mail</th>\n                </tr>',o.innerHTML="",null===t.data.users)o.innerHTML="<tr><td>유저를</td><td>추가</td><td>하세요.</td><td></td></tr>";else{l=Math.ceil(t.data.countAllUsers/15);for(let e=0;e<t.data.users.length;e++)"anonymous"===t.data.users[e].type?o.innerHTML+=`\n                <tr class="user-list">\n                    <td>${t.data.users[e].userId}</td>\n                    <td onclick="moveUserDetailPage(${t.data.users[e].userId})"\n                        style="cursor:pointer">익명${t.data.users[e].userId}</td>\n                    <td></td>\n                    <td></td>\n                </tr>\n                `:o.innerHTML+=`\n                <tr class="user-list">\n                    <td>${t.data.users[e].userId}</td>\n                    <td onclick="moveUserDetailPage(${t.data.users[e].userId})"\n                    style="cursor:pointer">${t.data.users[e].defaultInfo.name||`익명${t.data.users[e].userId}`}</td>\n                    <td>${t.data.users[e].defaultInfo.studentId||" "}</td>\n                    <td>${t.data.users[e].defaultInfo.email||" "}</td>\n                </tr>\n                `}})),await f()}function p(){let t='<ul class="pagination justify-content-center">\n                <li class="page-item">\n                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true" onclick="movePreviousNoticePage()">Previous</a>\n                </li>',e=5*Math.ceil(r/5);e>d&&(e=d);for(let a=e-4<=0?1:e-4;a<=e;a++)t+=`<li class="page-item ${r==a?"active":""}"><a class="page-link" onclick="moveAdminNoticePage(${a})">${a}</a></li>`;t+='<li class="page-item">\n                    <a class="page-link" href="#" onclick="moveNextNoticePage()">Next</a>\n                </li>',document.querySelector("#notice-pagination-bar").innerHTML=t}function f(){let t='<ul class="pagination justify-content-center">\n                <li class="page-item">\n                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true" onclick="movePreviousUserPage()">Previous</a>\n                </li>',e=5*Math.ceil(c/5);e>l&&(e=l);for(let a=e-4<=0?1:e-4;a<=e;a++)t+=`<li class="page-item ${c==a?"active":""}"><a class="page-link" onclick="moveAdminUserPage(${a})">${a}</a></li>`;t+='<li class="page-item">\n                    <a class="page-link" href="#" onclick="moveNextUserPage()">Next</a>\n                </li>',document.querySelector("#user-pagination-bar").innerHTML=t}window.moveNoticeDetailPage=function(t){window.location.href=`../html/admin_notice_detail.html?postId=${t}`},window.moveUserDetailPage=function(t){window.location.href=`../html/admin_user_detail.html?userId=${t}`},window.moveNoticeAddPage=function(){window.location.href="../html/notices_add.html"},window.moveNextNoticePage=function(){r>=d||(r++,u=`http://34.64.170.244:80/api/admin/posts?offset=15&pageNum=${r}`,h(),p())},window.moveAdminNoticePage=function(t){r!==t&&(r=t,u=`http://34.64.170.244:80/api/admin/posts?offset=15&pageNum=${r}`,h(),p())},window.moveUserAddPage=function(){window.location.href="../html/user_add.html"},window.moveNextUserPage=function(){c>=l||(c++,m=`http://34.64.170.244:80/api/admin/users?offset=15&pageNum=${c}`,g(),f())},h(),g()})();