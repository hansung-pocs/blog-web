(()=>{"use strict";function e(e){return`https://www.hansungpocs.site/${e}`}const n=document.querySelector("#usersDiv"),t=document.querySelector("#inlineRadio0"),i=document.querySelector("#inlineRadio1"),l=document.querySelector("#inlineRadio2"),a=(document.querySelector("#user_search"),document.querySelector("#userNum"));let o,s,c,r=1,d=localStorage.getItem("sessionToken"),u=new Headers({"x-pocs-session-token":d});async function f(e){await fetch(e,{headers:u}).then((e=>e.json())).then((e=>{console.log(e),null===e.data.users?n.innerHTML="<div>유저를 추가 하세요.</div>":(o=e.data.users,c=Math.ceil(e.data.countAllUsers/9),t.checked||i.checked||l.checked,h(o,s),g(o),a.innerHTML=`(${e.data.countAllUsers})`)})),await m()}function g(t){console.log(t),n.innerHTML="";for(let i=0;i<9;i++){if(null==t[i])continue;let l;null!=t[i]?.defaultInfo.userProfilePath?(l=e(`${t[i]?.defaultInfo.userProfilePath}`),console.log(l)):l="../img/profile.png",n.innerHTML+=`\n            <div class="col-3 p-4 m-2" onclick="checktoGoDetailPage(${t[i]?.userId})" \n                    style="cursor:pointer;text-align: center;border: solid white 1px;border-radius: 10px;box-shadow:0px 1px 3px 1px gray">\n                    <img class="w-50" src=${l} style="width:140px;height:140px;object-fit: cover">\n                    <div class="my-1" style="font-size: large"><b>${t[i]?.defaultInfo.name||"비회원"}</b></div>\n                    <div class="my-1"><b>${t[i]?.defaultInfo.generation}기</b></div>\n                    <div class="my-1">${t[i]?.defaultInfo.studentId}</div>\n                    <div class="my-1">\n                        <span title="${t[i]?.defaultInfo.email}" class="me-2">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">\n                                <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>\n                            </svg>\n                        </span>\n                        <a href="${t[i]?.defaultInfo.github}" style="color: inherit;">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">\n                                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n                            </svg>\n                        </a>\n                    </div>\n            </div>\n            `}}function h(e,n){if("created"==n){for(let n=0;n<e.length-1;n++)for(let t=n+1;t<e.length;t++)if(e[n]?.userId<e[t]?.userId){let i=e[n];e[n]=e[t],e[t]=i}}else if("generation"==n){for(let n=0;n<e.length-1;n++)for(let t=n+1;t<e.length;t++)if(e[n]?.defaultInfo.generation<e[t]?.defaultInfo.generation){let i=e[n];e[n]=e[t],e[t]=i}}else if("studentId"==n)for(let n=0;n<e.length-1;n++)for(let t=n+1;t<e.length;t++)if(parseInt(e[n]?.defaultInfo.studentId)>parseInt(e[t]?.defaultInfo.studentId)){let i=e[n];e[n]=e[t],e[t]=i}}async function p(){await f(e(`api/users?offset=9&pageNum=${r}`)),m()}function m(){let e='<ul class="pagination justify-content-center">\n                <li class="page-item">\n                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true" onclick="movePreviousPage()">Previous</a>\n                </li>',n=5*Math.ceil(r/5);n>c&&(n=c);for(let t=n-4<=0?1:n-4;t<=n;t++)e+=`<li class="page-item ${r==t?"active":""}"><a class="page-link" onclick="movePage(${t})">${t}</a></li>`;e+='<li class="page-item">\n                    <a class="page-link" href="#" onclick="moveNextPage()">Next</a>\n                </li>',document.querySelector("#pagination-bar").innerHTML=e}function v(e){"inlineRadio0"===e.target.id?s="created":"inlineRadio1"===e.target.id?s="generation":"inlineRadio2"===e.target.id&&(s="studentId"),h(o,s),g(o)}console.log(d),window.btnClick=function(){!async function(n){await f(e(`api/users?search=${n}&offset=9&pageNum=${r}`))}(document.getElementById("searchUser").value)},window.movePage=async function(e){e>c||r!==e&&(r=e,p())},window.moveNextPage=async function(){r>=c||(r++,p())},window.movePreviousPage=async function(){r<=1||(r--,p())},window.checktoGoDetailPage=function(e){null===localStorage.getItem("userType")?alert("블로그 회원만 조회 가능합니다."):window.location.href=`user_detail.html?userId=${e}`},t.addEventListener("click",v),i.addEventListener("click",v),l.addEventListener("click",v),f(e(`api/users?offset=9&pageNum=${r}`))})();